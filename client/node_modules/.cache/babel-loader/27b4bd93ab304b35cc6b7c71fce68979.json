{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { connect } from 'mini-store';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport createChainedFunction from \"rc-util/es/createChainedFunction\";\nimport toArray from \"rc-util/es/Children/toArray\";\nimport shallowEqual from 'shallowequal';\nimport classNames from 'classnames';\nimport { getKeyFromChildrenIndex, loopMenuItem, noop, menuAllProps, isMobileDevice } from './util';\nimport DOMWrap from './DOMWrap';\n\nfunction allDisabled(arr) {\n  if (!arr.length) {\n    return true;\n  }\n\n  return arr.every(function (c) {\n    return !!c.props.disabled;\n  });\n}\n\nfunction updateActiveKey(store, menuId, activeKey) {\n  var state = store.getState();\n  store.setState({\n    activeKey: _objectSpread(_objectSpread({}, state.activeKey), {}, _defineProperty({}, menuId, activeKey))\n  });\n}\n\nfunction getEventKey(props) {\n  // when eventKey not available ,it's menu and return menu id '0-menu-'\n  return props.eventKey || '0-menu-';\n}\n\nexport function getActiveKey(props, originalActiveKey) {\n  var activeKey = originalActiveKey;\n  var children = props.children,\n      eventKey = props.eventKey;\n\n  if (activeKey) {\n    var found;\n    loopMenuItem(children, function (c, i) {\n      if (c && c.props && !c.props.disabled && activeKey === getKeyFromChildrenIndex(c, eventKey, i)) {\n        found = true;\n      }\n    });\n\n    if (found) {\n      return activeKey;\n    }\n  }\n\n  activeKey = null;\n\n  if (props.defaultActiveFirst) {\n    loopMenuItem(children, function (c, i) {\n      if (!activeKey && c && !c.props.disabled) {\n        activeKey = getKeyFromChildrenIndex(c, eventKey, i);\n      }\n    });\n    return activeKey;\n  }\n\n  return activeKey;\n}\nexport function saveRef(c) {\n  if (!c) {\n    return;\n  }\n  /* eslint-disable @typescript-eslint/no-invalid-this */\n\n\n  var index = this.instanceArray.indexOf(c);\n\n  if (index !== -1) {\n    // update component if it's already inside instanceArray\n    this.instanceArray[index] = c;\n  } else {\n    // add component if it's not in instanceArray yet;\n    this.instanceArray.push(c);\n  }\n  /* eslint-enable @typescript-eslint/no-invalid-this */\n\n}\nexport var SubPopupMenu = /*#__PURE__*/function (_React$Component) {\n  _inherits(SubPopupMenu, _React$Component);\n\n  var _super = _createSuper(SubPopupMenu);\n\n  function SubPopupMenu(props) {\n    var _this;\n\n    _classCallCheck(this, SubPopupMenu);\n\n    _this = _super.call(this, props);\n    /**\n     * all keyboard events callbacks run from here at first\n     *\n     * note:\n     *  This legacy code that `onKeyDown` is called by parent instead of dom self.\n     *  which need return code to check if this event is handled\n     */\n\n    _this.onKeyDown = function (e, callback) {\n      var keyCode = e.keyCode;\n      var handled;\n\n      _this.getFlatInstanceArray().forEach(function (obj) {\n        if (obj && obj.props.active && obj.onKeyDown) {\n          handled = obj.onKeyDown(e);\n        }\n      });\n\n      if (handled) {\n        return 1;\n      }\n\n      var activeItem = null;\n\n      if (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN) {\n        activeItem = _this.step(keyCode === KeyCode.UP ? -1 : 1);\n      }\n\n      if (activeItem) {\n        e.preventDefault();\n        updateActiveKey(_this.props.store, getEventKey(_this.props), activeItem.props.eventKey);\n\n        if (typeof callback === 'function') {\n          callback(activeItem);\n        }\n\n        return 1;\n      }\n\n      return undefined;\n    };\n\n    _this.onItemHover = function (e) {\n      var key = e.key,\n          hover = e.hover;\n      updateActiveKey(_this.props.store, getEventKey(_this.props), hover ? key : null);\n    };\n\n    _this.onDeselect = function (selectInfo) {\n      _this.props.onDeselect(selectInfo);\n    };\n\n    _this.onSelect = function (selectInfo) {\n      _this.props.onSelect(selectInfo);\n    };\n\n    _this.onClick = function (e) {\n      _this.props.onClick(e);\n    };\n\n    _this.onOpenChange = function (e) {\n      _this.props.onOpenChange(e);\n    };\n\n    _this.onDestroy = function (key) {\n      /* istanbul ignore next */\n      _this.props.onDestroy(key);\n    };\n\n    _this.getFlatInstanceArray = function () {\n      return _this.instanceArray;\n    };\n\n    _this.step = function (direction) {\n      var children = _this.getFlatInstanceArray();\n\n      var activeKey = _this.props.store.getState().activeKey[getEventKey(_this.props)];\n\n      var len = children.length;\n\n      if (!len) {\n        return null;\n      }\n\n      if (direction < 0) {\n        children = children.concat().reverse();\n      } // find current activeIndex\n\n\n      var activeIndex = -1;\n      children.every(function (c, ci) {\n        if (c && c.props.eventKey === activeKey) {\n          activeIndex = ci;\n          return false;\n        }\n\n        return true;\n      });\n\n      if (!_this.props.defaultActiveFirst && activeIndex !== -1 && allDisabled(children.slice(activeIndex, len - 1))) {\n        return undefined;\n      }\n\n      var start = (activeIndex + 1) % len;\n      var i = start;\n\n      do {\n        var child = children[i];\n\n        if (!child || child.props.disabled) {\n          i = (i + 1) % len;\n        } else {\n          return child;\n        }\n      } while (i !== start);\n\n      return null;\n    };\n\n    _this.renderCommonMenuItem = function (child, i, extraProps) {\n      var state = _this.props.store.getState();\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props;\n\n      var key = getKeyFromChildrenIndex(child, props.eventKey, i);\n      var childProps = child.props; // https://github.com/ant-design/ant-design/issues/11517#issuecomment-477403055\n\n      if (!childProps || typeof child.type === 'string') {\n        return child;\n      }\n\n      var isActive = key === state.activeKey;\n\n      var newChildProps = _objectSpread(_objectSpread({\n        mode: childProps.mode || props.mode,\n        level: props.level,\n        inlineIndent: props.inlineIndent,\n        renderMenuItem: _this.renderMenuItem,\n        rootPrefixCls: props.prefixCls,\n        index: i,\n        parentMenu: props.parentMenu,\n        // customized ref function, need to be invoked manually in child's componentDidMount\n        manualRef: childProps.disabled ? undefined : createChainedFunction(child.ref, saveRef.bind(_assertThisInitialized(_this))),\n        eventKey: key,\n        active: !childProps.disabled && isActive,\n        multiple: props.multiple,\n        onClick: function onClick(e) {\n          (childProps.onClick || noop)(e);\n\n          _this.onClick(e);\n        },\n        onItemHover: _this.onItemHover,\n        motion: props.motion,\n        subMenuOpenDelay: props.subMenuOpenDelay,\n        subMenuCloseDelay: props.subMenuCloseDelay,\n        forceSubMenuRender: props.forceSubMenuRender,\n        onOpenChange: _this.onOpenChange,\n        onDeselect: _this.onDeselect,\n        onSelect: _this.onSelect,\n        builtinPlacements: props.builtinPlacements,\n        itemIcon: childProps.itemIcon || _this.props.itemIcon,\n        expandIcon: childProps.expandIcon || _this.props.expandIcon\n      }, extraProps), {}, {\n        direction: props.direction\n      }); // ref: https://github.com/ant-design/ant-design/issues/13943\n\n\n      if (props.mode === 'inline' || isMobileDevice()) {\n        newChildProps.triggerSubMenuAction = 'click';\n      }\n\n      return /*#__PURE__*/React.cloneElement(child, _objectSpread(_objectSpread({}, newChildProps), {}, {\n        key: key || i\n      }));\n    };\n\n    _this.renderMenuItem = function (c, i, subMenuKey) {\n      /* istanbul ignore if */\n      if (!c) {\n        return null;\n      }\n\n      var state = _this.props.store.getState();\n\n      var extraProps = {\n        openKeys: state.openKeys,\n        selectedKeys: state.selectedKeys,\n        triggerSubMenuAction: _this.props.triggerSubMenuAction,\n        subMenuKey: subMenuKey\n      };\n      return _this.renderCommonMenuItem(c, i, extraProps);\n    };\n\n    props.store.setState({\n      activeKey: _objectSpread(_objectSpread({}, props.store.getState().activeKey), {}, _defineProperty({}, props.eventKey, getActiveKey(props, props.activeKey)))\n    });\n    _this.instanceArray = [];\n    return _this;\n  }\n\n  _createClass(SubPopupMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // invoke customized ref to expose component to mixin\n      if (this.props.manualRef) {\n        this.props.manualRef(this);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.props.visible || nextProps.visible || this.props.className !== nextProps.className || !shallowEqual(this.props.style, nextProps.style);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var props = this.props;\n      var originalActiveKey = 'activeKey' in props ? props.activeKey : props.store.getState().activeKey[getEventKey(props)];\n      var activeKey = getActiveKey(props, originalActiveKey);\n\n      if (activeKey !== originalActiveKey) {\n        updateActiveKey(props.store, getEventKey(props), activeKey);\n      } else if ('activeKey' in prevProps) {\n        // If prev activeKey is not same as current activeKey,\n        // we should set it.\n        var prevActiveKey = getActiveKey(prevProps, prevProps.activeKey);\n\n        if (activeKey !== prevActiveKey) {\n          updateActiveKey(props.store, getEventKey(props), activeKey);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var props = _extends({}, this.props);\n\n      this.instanceArray = [];\n      var className = classNames(props.prefixCls, props.className, \"\".concat(props.prefixCls, \"-\").concat(props.mode));\n      var domProps = {\n        className: className,\n        // role could be 'select' and by default set to menu\n        role: props.role || 'menu'\n      };\n\n      if (props.id) {\n        domProps.id = props.id;\n      }\n\n      if (props.focusable) {\n        domProps.tabIndex = 0;\n        domProps.onKeyDown = this.onKeyDown;\n      }\n\n      var prefixCls = props.prefixCls,\n          eventKey = props.eventKey,\n          visible = props.visible,\n          level = props.level,\n          mode = props.mode,\n          overflowedIndicator = props.overflowedIndicator,\n          theme = props.theme;\n      menuAllProps.forEach(function (key) {\n        return delete props[key];\n      }); // Otherwise, the propagated click event will trigger another onClick\n\n      delete props.onClick;\n      return /*#__PURE__*/React.createElement(DOMWrap, _extends({}, props, {\n        prefixCls: prefixCls,\n        mode: mode,\n        tag: \"ul\",\n        level: level,\n        theme: theme,\n        visible: visible,\n        overflowedIndicator: overflowedIndicator\n      }, domProps), toArray(props.children).map(function (c, i) {\n        return _this2.renderMenuItem(c, i, eventKey || '0-menu-');\n      }));\n    }\n  }]);\n\n  return SubPopupMenu;\n}(React.Component);\nSubPopupMenu.defaultProps = {\n  prefixCls: 'rc-menu',\n  className: '',\n  mode: 'vertical',\n  level: 1,\n  inlineIndent: 24,\n  visible: true,\n  focusable: true,\n  style: {},\n  manualRef: noop\n};\nvar connected = connect()(SubPopupMenu);\nexport default connected;","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/rc-menu/es/SubPopupMenu.js"],"names":["_extends","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_createSuper","_defineProperty","_objectSpread","React","connect","KeyCode","createChainedFunction","toArray","shallowEqual","classNames","getKeyFromChildrenIndex","loopMenuItem","noop","menuAllProps","isMobileDevice","DOMWrap","allDisabled","arr","length","every","c","props","disabled","updateActiveKey","store","menuId","activeKey","state","getState","setState","getEventKey","eventKey","getActiveKey","originalActiveKey","children","found","i","defaultActiveFirst","saveRef","index","instanceArray","indexOf","push","SubPopupMenu","_React$Component","_super","_this","call","onKeyDown","e","callback","keyCode","handled","getFlatInstanceArray","forEach","obj","active","activeItem","UP","DOWN","step","preventDefault","undefined","onItemHover","key","hover","onDeselect","selectInfo","onSelect","onClick","onOpenChange","onDestroy","direction","len","concat","reverse","activeIndex","ci","slice","start","child","renderCommonMenuItem","extraProps","_assertThisInitialize","childProps","type","isActive","newChildProps","mode","level","inlineIndent","renderMenuItem","rootPrefixCls","prefixCls","parentMenu","manualRef","ref","bind","multiple","motion","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","builtinPlacements","itemIcon","expandIcon","triggerSubMenuAction","cloneElement","subMenuKey","openKeys","selectedKeys","value","componentDidMount","shouldComponentUpdate","nextProps","visible","className","style","componentDidUpdate","prevProps","prevActiveKey","render","_this2","domProps","role","id","focusable","tabIndex","overflowedIndicator","theme","createElement","tag","map","Component","defaultProps","connected"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { connect } from 'mini-store';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport createChainedFunction from \"rc-util/es/createChainedFunction\";\nimport toArray from \"rc-util/es/Children/toArray\";\nimport shallowEqual from 'shallowequal';\nimport classNames from 'classnames';\nimport { getKeyFromChildrenIndex, loopMenuItem, noop, menuAllProps, isMobileDevice } from './util';\nimport DOMWrap from './DOMWrap';\n\nfunction allDisabled(arr) {\n  if (!arr.length) {\n    return true;\n  }\n\n  return arr.every(function (c) {\n    return !!c.props.disabled;\n  });\n}\n\nfunction updateActiveKey(store, menuId, activeKey) {\n  var state = store.getState();\n  store.setState({\n    activeKey: _objectSpread(_objectSpread({}, state.activeKey), {}, _defineProperty({}, menuId, activeKey))\n  });\n}\n\nfunction getEventKey(props) {\n  // when eventKey not available ,it's menu and return menu id '0-menu-'\n  return props.eventKey || '0-menu-';\n}\n\nexport function getActiveKey(props, originalActiveKey) {\n  var activeKey = originalActiveKey;\n  var children = props.children,\n      eventKey = props.eventKey;\n\n  if (activeKey) {\n    var found;\n    loopMenuItem(children, function (c, i) {\n      if (c && c.props && !c.props.disabled && activeKey === getKeyFromChildrenIndex(c, eventKey, i)) {\n        found = true;\n      }\n    });\n\n    if (found) {\n      return activeKey;\n    }\n  }\n\n  activeKey = null;\n\n  if (props.defaultActiveFirst) {\n    loopMenuItem(children, function (c, i) {\n      if (!activeKey && c && !c.props.disabled) {\n        activeKey = getKeyFromChildrenIndex(c, eventKey, i);\n      }\n    });\n    return activeKey;\n  }\n\n  return activeKey;\n}\nexport function saveRef(c) {\n  if (!c) {\n    return;\n  }\n  /* eslint-disable @typescript-eslint/no-invalid-this */\n\n\n  var index = this.instanceArray.indexOf(c);\n\n  if (index !== -1) {\n    // update component if it's already inside instanceArray\n    this.instanceArray[index] = c;\n  } else {\n    // add component if it's not in instanceArray yet;\n    this.instanceArray.push(c);\n  }\n  /* eslint-enable @typescript-eslint/no-invalid-this */\n\n}\nexport var SubPopupMenu = /*#__PURE__*/function (_React$Component) {\n  _inherits(SubPopupMenu, _React$Component);\n\n  var _super = _createSuper(SubPopupMenu);\n\n  function SubPopupMenu(props) {\n    var _this;\n\n    _classCallCheck(this, SubPopupMenu);\n\n    _this = _super.call(this, props);\n    /**\n     * all keyboard events callbacks run from here at first\n     *\n     * note:\n     *  This legacy code that `onKeyDown` is called by parent instead of dom self.\n     *  which need return code to check if this event is handled\n     */\n\n    _this.onKeyDown = function (e, callback) {\n      var keyCode = e.keyCode;\n      var handled;\n\n      _this.getFlatInstanceArray().forEach(function (obj) {\n        if (obj && obj.props.active && obj.onKeyDown) {\n          handled = obj.onKeyDown(e);\n        }\n      });\n\n      if (handled) {\n        return 1;\n      }\n\n      var activeItem = null;\n\n      if (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN) {\n        activeItem = _this.step(keyCode === KeyCode.UP ? -1 : 1);\n      }\n\n      if (activeItem) {\n        e.preventDefault();\n        updateActiveKey(_this.props.store, getEventKey(_this.props), activeItem.props.eventKey);\n\n        if (typeof callback === 'function') {\n          callback(activeItem);\n        }\n\n        return 1;\n      }\n\n      return undefined;\n    };\n\n    _this.onItemHover = function (e) {\n      var key = e.key,\n          hover = e.hover;\n      updateActiveKey(_this.props.store, getEventKey(_this.props), hover ? key : null);\n    };\n\n    _this.onDeselect = function (selectInfo) {\n      _this.props.onDeselect(selectInfo);\n    };\n\n    _this.onSelect = function (selectInfo) {\n      _this.props.onSelect(selectInfo);\n    };\n\n    _this.onClick = function (e) {\n      _this.props.onClick(e);\n    };\n\n    _this.onOpenChange = function (e) {\n      _this.props.onOpenChange(e);\n    };\n\n    _this.onDestroy = function (key) {\n      /* istanbul ignore next */\n      _this.props.onDestroy(key);\n    };\n\n    _this.getFlatInstanceArray = function () {\n      return _this.instanceArray;\n    };\n\n    _this.step = function (direction) {\n      var children = _this.getFlatInstanceArray();\n\n      var activeKey = _this.props.store.getState().activeKey[getEventKey(_this.props)];\n\n      var len = children.length;\n\n      if (!len) {\n        return null;\n      }\n\n      if (direction < 0) {\n        children = children.concat().reverse();\n      } // find current activeIndex\n\n\n      var activeIndex = -1;\n      children.every(function (c, ci) {\n        if (c && c.props.eventKey === activeKey) {\n          activeIndex = ci;\n          return false;\n        }\n\n        return true;\n      });\n\n      if (!_this.props.defaultActiveFirst && activeIndex !== -1 && allDisabled(children.slice(activeIndex, len - 1))) {\n        return undefined;\n      }\n\n      var start = (activeIndex + 1) % len;\n      var i = start;\n\n      do {\n        var child = children[i];\n\n        if (!child || child.props.disabled) {\n          i = (i + 1) % len;\n        } else {\n          return child;\n        }\n      } while (i !== start);\n\n      return null;\n    };\n\n    _this.renderCommonMenuItem = function (child, i, extraProps) {\n      var state = _this.props.store.getState();\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props;\n\n      var key = getKeyFromChildrenIndex(child, props.eventKey, i);\n      var childProps = child.props; // https://github.com/ant-design/ant-design/issues/11517#issuecomment-477403055\n\n      if (!childProps || typeof child.type === 'string') {\n        return child;\n      }\n\n      var isActive = key === state.activeKey;\n\n      var newChildProps = _objectSpread(_objectSpread({\n        mode: childProps.mode || props.mode,\n        level: props.level,\n        inlineIndent: props.inlineIndent,\n        renderMenuItem: _this.renderMenuItem,\n        rootPrefixCls: props.prefixCls,\n        index: i,\n        parentMenu: props.parentMenu,\n        // customized ref function, need to be invoked manually in child's componentDidMount\n        manualRef: childProps.disabled ? undefined : createChainedFunction(child.ref, saveRef.bind(_assertThisInitialized(_this))),\n        eventKey: key,\n        active: !childProps.disabled && isActive,\n        multiple: props.multiple,\n        onClick: function onClick(e) {\n          (childProps.onClick || noop)(e);\n\n          _this.onClick(e);\n        },\n        onItemHover: _this.onItemHover,\n        motion: props.motion,\n        subMenuOpenDelay: props.subMenuOpenDelay,\n        subMenuCloseDelay: props.subMenuCloseDelay,\n        forceSubMenuRender: props.forceSubMenuRender,\n        onOpenChange: _this.onOpenChange,\n        onDeselect: _this.onDeselect,\n        onSelect: _this.onSelect,\n        builtinPlacements: props.builtinPlacements,\n        itemIcon: childProps.itemIcon || _this.props.itemIcon,\n        expandIcon: childProps.expandIcon || _this.props.expandIcon\n      }, extraProps), {}, {\n        direction: props.direction\n      }); // ref: https://github.com/ant-design/ant-design/issues/13943\n\n\n      if (props.mode === 'inline' || isMobileDevice()) {\n        newChildProps.triggerSubMenuAction = 'click';\n      }\n\n      return /*#__PURE__*/React.cloneElement(child, _objectSpread(_objectSpread({}, newChildProps), {}, {\n        key: key || i\n      }));\n    };\n\n    _this.renderMenuItem = function (c, i, subMenuKey) {\n      /* istanbul ignore if */\n      if (!c) {\n        return null;\n      }\n\n      var state = _this.props.store.getState();\n\n      var extraProps = {\n        openKeys: state.openKeys,\n        selectedKeys: state.selectedKeys,\n        triggerSubMenuAction: _this.props.triggerSubMenuAction,\n        subMenuKey: subMenuKey\n      };\n      return _this.renderCommonMenuItem(c, i, extraProps);\n    };\n\n    props.store.setState({\n      activeKey: _objectSpread(_objectSpread({}, props.store.getState().activeKey), {}, _defineProperty({}, props.eventKey, getActiveKey(props, props.activeKey)))\n    });\n    _this.instanceArray = [];\n    return _this;\n  }\n\n  _createClass(SubPopupMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // invoke customized ref to expose component to mixin\n      if (this.props.manualRef) {\n        this.props.manualRef(this);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.props.visible || nextProps.visible || this.props.className !== nextProps.className || !shallowEqual(this.props.style, nextProps.style);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var props = this.props;\n      var originalActiveKey = 'activeKey' in props ? props.activeKey : props.store.getState().activeKey[getEventKey(props)];\n      var activeKey = getActiveKey(props, originalActiveKey);\n\n      if (activeKey !== originalActiveKey) {\n        updateActiveKey(props.store, getEventKey(props), activeKey);\n      } else if ('activeKey' in prevProps) {\n        // If prev activeKey is not same as current activeKey,\n        // we should set it.\n        var prevActiveKey = getActiveKey(prevProps, prevProps.activeKey);\n\n        if (activeKey !== prevActiveKey) {\n          updateActiveKey(props.store, getEventKey(props), activeKey);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var props = _extends({}, this.props);\n\n      this.instanceArray = [];\n      var className = classNames(props.prefixCls, props.className, \"\".concat(props.prefixCls, \"-\").concat(props.mode));\n      var domProps = {\n        className: className,\n        // role could be 'select' and by default set to menu\n        role: props.role || 'menu'\n      };\n\n      if (props.id) {\n        domProps.id = props.id;\n      }\n\n      if (props.focusable) {\n        domProps.tabIndex = 0;\n        domProps.onKeyDown = this.onKeyDown;\n      }\n\n      var prefixCls = props.prefixCls,\n          eventKey = props.eventKey,\n          visible = props.visible,\n          level = props.level,\n          mode = props.mode,\n          overflowedIndicator = props.overflowedIndicator,\n          theme = props.theme;\n      menuAllProps.forEach(function (key) {\n        return delete props[key];\n      }); // Otherwise, the propagated click event will trigger another onClick\n\n      delete props.onClick;\n      return /*#__PURE__*/React.createElement(DOMWrap, _extends({}, props, {\n        prefixCls: prefixCls,\n        mode: mode,\n        tag: \"ul\",\n        level: level,\n        theme: theme,\n        visible: visible,\n        overflowedIndicator: overflowedIndicator\n      }, domProps), toArray(props.children).map(function (c, i) {\n        return _this2.renderMenuItem(c, i, eventKey || '0-menu-');\n      }));\n    }\n  }]);\n\n  return SubPopupMenu;\n}(React.Component);\nSubPopupMenu.defaultProps = {\n  prefixCls: 'rc-menu',\n  className: '',\n  mode: 'vertical',\n  level: 1,\n  inlineIndent: 24,\n  visible: true,\n  focusable: true,\n  style: {},\n  manualRef: noop\n};\nvar connected = connect()(SubPopupMenu);\nexport default connected;"]},"metadata":{},"sourceType":"module"}